# A new, improved version of the TVM workflow using the enhanced YAML dialect.

# === Global Configuration ===
# These settings apply to the entire run unless overridden below.
pdf_file: Idu_04.pdf
model: gemini-2.5-pro

# === Default Parameters ===
# Default settings are defined for each step type to reduce repetition.
defaults:
  extract_text_from_pdf:
    output_suffix: transcribe
    # The model for transcription can be set globally for this step type.
    model: gemini-flash-latest
  chat:
    output_extension: ".md"

# === Page Ranges ===
# The workflow will run for each of the page ranges defined here.
page_ranges:
  - page_range: 76-78
    suffix: 4.3.0
  # - page_range: 85-89
  #   suffix: 4.3.3
  # - page_range: 89,91,93-94
  #   suffix: 4.3.4
  # - page_range: 95-98
  #   suffix: 4.3.5
  # - page_range: 98-101
  #   suffix: 4.3.6
  # - page_range: 102-104
  #   suffix: 4.3.7
  # - page_range: 104-106
  #   suffix: 4.3.8
  # - page_range: 107-109
  #   suffix: 4.3.9
  # - page_range: 109-111
  #   suffix: 4.3.10
  # - page_range: 111-113
  #   suffix: 4.3.11

# === Dynamic Workflow Definition ===
workflow:
  # Step 1: Extract text from the PDF.
  # This step automatically uses the defaults defined above: a model override
  # and the 'transcribe' output suffix.
  - type: extract_text_from_pdf
    prompt: prompt-transcribe.txt

  # Step 2: Translate the text using a single-turn chat.
  # This uses the simplified chat syntax and inherits the default settings
  # for 'output_extension' and 'clear_uploads'.
  - type: chat
    prompt: prompt-translate.txt
    # We still specify an empty suffix to prevent one from being generated.
    output_suffix: ""
    # Since the PDF context is only needed for the first step, we can
    # clear it for all chat steps.
    clear_uploads: true

